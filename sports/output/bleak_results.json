{"leaks":[{"id":13582,"paths":[[{"type":1,"indexOrName":"sportVisitHistory"}]],"scores":{"retainedSize":392,"leakShare":392,"transitiveClosureSize":19776,"ownedObjects":2},"stacks":[[0,1,2,3]]},{"id":42084,"paths":[[{"type":1,"indexOrName":"prev"},{"type":5,"indexOrName":"$$listeners"},{"type":1,"indexOrName":"click"}]],"scores":{"retainedSize":7816,"leakShare":7816,"transitiveClosureSize":27200,"ownedObjects":162},"stacks":[[4,2,3]]},{"id":47835,"paths":[[{"type":6,"indexOrName":"$$$DOM$$$"},{"type":1,"indexOrName":"childNodes"},{"type":1,"indexOrName":"$$$CHILD$$$1"},{"type":1,"indexOrName":"childNodes"},{"type":1,"indexOrName":"$$$CHILD$$$1"},{"type":1,"indexOrName":"childNodes"},{"type":1,"indexOrName":"$$$CHILD$$$1"},{"type":1,"indexOrName":"childNodes"}]],"scores":{"retainedSize":17456,"leakShare":17456,"transitiveClosureSize":280248,"ownedObjects":431},"stacks":[[5,6,1,2,3]]}],"stackFrames":[["http://localhost:7878/sports/sports.js",38,22,"selectSport","    at selectSport (http://localhost:7878/sports/sports.js:66:34)"],["http://localhost:7878/sports/sports.js",57,14,"HTMLButtonElement.nextSport","    at HTMLButtonElement.nextSport (http://localhost:7878/sports/sports.js:83:56)"],["http://localhost:7878/sports/index.html",24,39,"Object.next","    at Object.next (http://localhost:7878/sports/index.html:24:39)"],[null,1,21,null,"    at <anonymous>:1:21"],["http://localhost:7878/sports/sports.js",49,9,"HTMLButtonElement.nextSport","    at HTMLButtonElement.nextSport (http://localhost:7878/sports/sports.js:75:21)"],["http://localhost:7878/sports/sports.js",27,7,"presentSport","    at presentSport (http://localhost:7878/sports/sports.js:58:20)"],["http://localhost:7878/sports/sports.js",41,15,"selectSport","    at selectSport (http://localhost:7878/sports/sports.js:69:58)"]],"sourceFiles":{"http://localhost:7878/sports/sports.js":{"mimeType":"text/javascript","source":"var main = document.getElementById('main');\nvar next = document.getElementById('next');\nvar prev = document.getElementById('prev');\n\nvar currentSport = null;\n// apologies in advance to sports fans.\nvar sports = [{\n  name: 'Football',\n  description: 'Football is a sport in which players kick a ball around a field.'\n}, {\n  name: 'Handegg',\n  description: 'Handegg, sometimes mistakenly called football, is a sport in which players throw an egg-shaped ball. Players kick the ball in a limited set of circumstances.'\n}, {\n  name: 'Ultimate Frisbee',\n  description: \"It's a weird combination of basketball pass rules (without dribbling) and football scoring rules, but with a frisbee.\"\n}, {\n  name: 'Quidditch',\n  description: \"Quidditch is a sport where the points don't really matter at all; entire games rest on the shoulders of a single player from each team.\"\n}];\n// Array memory leak: Nothing manages the size of this array.\nvar sportVisitHistory = [];\n\nfunction presentSport(sport) {\n  var div = document.createElement('div');\n  div.className = \"sport\";\n  div.innerHTML = \"<h1>\" + sport.name + \"</h1><p>\" + sport.description + \"</p>\";\n  main.appendChild(div);\n}\n\nfunction selectSport(newSport, addToHistory) {\n  // Hide previous sports.\n  // DOM memory leak: Doesn't remove sports from the GUI!\n  var divs = document.getElementsByClassName('sport');\n  for (var i = 0; i < divs.length; i++) {\n    divs[i].style.display = \"none\";\n  }\n  if (addToHistory) {\n    sportVisitHistory.push(currentSport);\n  }\n  currentSport = newSport;\n  presentSport(currentSport);\n}\n\nfunction nextSport() {\n  var oldSport = currentSport;\n  if (oldSport !== null) {\n    // Causes bug: Prev only works once.\n    // Causes memory leak: Click handlers keep getting added and are never removed.\n    prev.addEventListener('click', function() {\n      selectSport(oldSport, false);\n    });\n  }\n  var newIndex = sports.indexOf(currentSport) + 1;\n  if (newIndex >= sports.length) {\n    newIndex = 0;\n  }\n  selectSport(sports[newIndex], true);\n}\n\nnext.addEventListener('click', nextSport);\n\nnextSport();\n"},"http://localhost:7878/sports/index.html":{"mimeType":"text/html","source":"<!doctype html>\n<html><script type=\"text/javascript\" src=\"/bleak_agent.js\"></script>\n  <script type=\"text/javascript\" src=\"/bleak_agent_transform.js\"></script>\n    <script type=\"text/javascript\">\n      [].forEach(function(num) {\n        $$$SHOULDFIX$$$(num, true);\n      });\n      (function() {\n  var module = { exports: {} };\n  var exports = module.exports;\n  exports.url = \"http://localhost:7878/sports/index.html\";\n\n// Returns a visual state that represents the given sport. \nfunction getStateFor(sportName) {\n  return {\n    check: function() {\n      // Check that the sport is displayed.\n      var main = document.getElementById('main');\n      var sportDiv = main.children[main.children.length - 1];\n      return sportDiv.getElementsByTagName('h1')[0].innerText.trim() === sportName;\n    },\n    next: function() {\n      // Navigate to the next sport.\n      document.getElementById('next').click();\n    }\n  };\n}\n\nexports.loop = ['Football', 'Handegg', 'Ultimate Frisbee', 'Quidditch'].map(getStateFor);\n\n  window.BLeakConfig = Object.assign({}, {\"iterations\":8,\"rankingEvaluationIterations\":10,\"rankingEvaluationRuns\":5,\"url\":\"http://localhost:8080/\",\"fixedLeaks\":[],\"fixMap\":{},\"login\":[],\"setup\":[],\"loop\":[],\"postCheckSleep\":1000,\"postNextSleep\":0,\"postLoginSleep\":5000,\"timeout\":600000}, module.exports ? module.exports : exports);\n})();\n    </script>\n    <script type=\"text/javascript\" src=\"/bleak_polyfill.js\"></script>\n    <script type=\"text/javascript\">\n      // Babel defines a 'global' variable that trips up some applications' environment detection.\n      if (typeof(global) !== \"undefined\") { delete window['global']; }\n    </script>\n<body>\n  <div id=\"main\"></div>\n  <button id=\"prev\">Prev</button><button id=\"next\">Next</button>\n  <script src=\"sports.js\"></script>\n</body>\n</html>\n"}},"heapStats":[{"numNodes":52761,"numEdges":211181,"totalSize":3196168,"hiddenSize":1030864,"arraySize":624384,"stringSize":306288,"objectSize":171136,"codeSize":738360,"closureSize":314992,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0},{"numNodes":47769,"numEdges":194471,"totalSize":3200944,"hiddenSize":1031672,"arraySize":624384,"stringSize":306288,"objectSize":174848,"codeSize":738360,"closureSize":315248,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0},{"numNodes":47898,"numEdges":195055,"totalSize":3206144,"hiddenSize":1032712,"arraySize":624456,"stringSize":306408,"objectSize":178560,"codeSize":738360,"closureSize":315504,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0},{"numNodes":48017,"numEdges":195604,"totalSize":3211352,"hiddenSize":1033072,"arraySize":625184,"stringSize":306568,"objectSize":182264,"codeSize":738360,"closureSize":315760,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0},{"numNodes":48141,"numEdges":196164,"totalSize":3217368,"hiddenSize":1033776,"arraySize":626368,"stringSize":306728,"objectSize":185976,"codeSize":738360,"closureSize":316016,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0},{"numNodes":48265,"numEdges":196724,"totalSize":3222200,"hiddenSize":1034480,"arraySize":626368,"stringSize":306888,"objectSize":189688,"codeSize":738360,"closureSize":316272,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0},{"numNodes":48389,"numEdges":197284,"totalSize":3227032,"hiddenSize":1035184,"arraySize":626368,"stringSize":307048,"objectSize":193400,"codeSize":738360,"closureSize":316528,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0},{"numNodes":48513,"numEdges":197844,"totalSize":3231864,"hiddenSize":1035888,"arraySize":626368,"stringSize":307208,"objectSize":197112,"codeSize":738360,"closureSize":316784,"regexpSize":392,"heapNumberSize":592,"nativeSize":0,"syntheticSize":0,"consStringSize":8560,"slicedStringSize":120,"symbolSize":480,"unknownSize":0}],"rankingEvaluation":{"leakShare":[],"transitiveClosureSize":[],"retainedSize":[]}}